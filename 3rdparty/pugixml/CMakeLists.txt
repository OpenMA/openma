SET(PUGIXML_SRCS
  src/pugixml.cpp
)

# DUE TO THE USE OF THE LGPL LICENSE BY FFPMEG, THIS LIBRARY MUST BE COMPILED
# EVERYTIME AS A SHARED LIBRARY
ADD_LIBRARY(pugixml SHARED ${PUGIXML_SRCS})

TARGET_INCLUDE_DIRECTORIES(pugixml PUBLIC
  $<BUILD_INTERFACE:${OPENMA_BINARY_DIR}/include>
  $<BUILD_INTERFACE:${OPENMA_SOURCE_DIR}/3rdparty/pugixml/include>
)

GENERATE_EXPORT_HEADER(pugixml
                       EXPORT_MACRO_NAME PUGIXML_API
                       EXPORT_FILE_NAME pugixml_export.h)

INSTALL(TARGETS pugixml EXPORT OpenMATargets
  LIBRARY DESTINATION lib
  ARCHIVE DESTINATION lib
  RUNTIME DESTINATION bin
  INCLUDES DESTINATION include
)