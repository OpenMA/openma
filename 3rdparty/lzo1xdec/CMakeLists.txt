SET(LZO1XDEC_SRCS
  src/lzo1xdec.cpp
)

# DUE TO THE USE OF THE LGPL LICENSE BY FFPMEG, THIS LIBRARY MUST BE COMPILED
# EVERYTIME AS A SHARED LIBRARY
ADD_LIBRARY(lzo1xdec SHARED ${LZO1XDEC_SRCS})

TARGET_INCLUDE_DIRECTORIES(lzo1xdec PUBLIC
  $<BUILD_INTERFACE:${OPENMA_BINARY_DIR}/include>
  $<BUILD_INTERFACE:${OPENMA_SOURCE_DIR}/3rdparty/lzo1xdec/include>
)

GENERATE_EXPORT_HEADER(lzo1xdec
                       BASE_NAME LZO1XDEC
                       EXPORT_FILE_NAME lzo1xdec_export.h)

INSTALL(TARGETS lzo1xdec EXPORT OpenMATargets
  LIBRARY DESTINATION lib
  ARCHIVE DESTINATION lib
  RUNTIME DESTINATION bin
  INCLUDES DESTINATION include
)

IF(BUILD_UNIT_TESTS)
  ADD_SUBDIRECTORY(test)
ENDIF()